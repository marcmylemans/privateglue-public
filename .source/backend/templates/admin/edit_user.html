{% extends "base.html" %}
{% block title %}Edit User - PrivateGlue{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Edit User: {{ user.username }}</h2>

  <form method="POST">
    <div class="mb-3">
      <label for="role" class="form-label">Role</label>
      <select class="form-select" name="role" id="role" required>
        <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
        <option value="editor" {% if user.role == 'editor' %}selected{% endif %}>Editor</option>
        <option value="readonly" {% if user.role == 'readonly' %}selected{% endif %}>Read-only</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="new_password" class="form-label">New Password (optional)</label>
      <input type="password" class="form-control" id="new_password" name="new_password" placeholder="Leave blank to keep current password">
    </div>

    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" value="1" id="force_password_reset" name="force_password_reset"
        {% if user.force_password_reset %}checked{% endif %}>
      <label class="form-check-label" for="force_password_reset">
        Force password reset at next login
      </label>
    </div>

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-success">Save Changes</button>
      <a href="{{ url_for('admin.list_users') }}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
